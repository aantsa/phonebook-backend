{"version":3,"sources":["components/Filter.js","components/Person.js","components/Persons.js","components/PersonForm.js","services/person.js","components/Notification.js","App.js","index.js"],"names":["Filter","filter","handleFilterChange","value","onChange","Person","person","personToDelete","name","number","onClick","id","Persons","personsToShow","map","i","key","PersonForm","addPerson","newPerson","handleChange","onSubmit","type","baseUrl","axios","get","post","newObject","put","then","response","data","delete","Notification","notification","error","className","message","App","props","useState","persons","setPersons","setNewPerson","searchFilter","setSearchFilter","setNotification","setPersonsToShow","useEffect","personService","pe","timer","setTimeout","clearTimeout","event","search","target","toLowerCase","includes","preventDefault","match","p","length","res","catch","window","confirm","newList","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.84f0a17c.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ filter, handleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      <p>filter shown with: </p>\r\n      <input value={filter} onChange={handleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst Person = ({ person, personToDelete }) => {\r\n  return (\r\n    <div>\r\n      {person.name} {person.number}\r\n      <button onClick={() => personToDelete(person.id, person.name)}>delete</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\nimport Person from \"./Person\";\r\n\r\nconst Persons = ({ personsToShow, personToDelete }) => {\r\n  return (\r\n    <div>\r\n      {personsToShow.map((person, i) => (\r\n        <div key={person.id}>\r\n          <Person person={person} personToDelete={personToDelete} />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React, { useState } from \"react\";\r\nconst PersonForm = ({ addPerson, newPerson, handleChange }) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          <p>name: </p>\r\n          <input name=\"name\" value={newPerson.name} onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          <p>number: </p>\r\n          <input\r\n            name=\"number\"\r\n            value={newPerson.number}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import axios from 'axios'\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newPerson => {\r\n  return axios.post(baseUrl, newPerson)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`);\r\n}\r\n\r\nexport default { \r\n  getAll: getAll, \r\n  create: create, \r\n  update: update,\r\n  remove: deletePerson,\r\n}","import React from \"react\";\r\n\r\nconst Notification = ({ notification} ) => {\r\n  if (notification === null) return null;\r\n\r\n  if (notification?.error) {\r\n    return <div className=\"error\">{notification?.message}</div>;\r\n  }\r\n\r\n  return <div className=\"success\">{notification?.message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useEffect, useState } from \"react\";\nimport Filter from \"./components/Filter\";\nimport Persons from \"./components/Persons\";\nimport PersonForm from \"./components/PersonForm\";\nimport personService from \"./services/person\";\nimport Notification from \"./components/Notification\";\n\nconst App = (props) => {\n  const [persons, setPersons] = useState([]);\n  const [newPerson, setNewPerson] = useState({ name: \"\", number: \"\" });\n  const [searchFilter, setSearchFilter] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n  const [personsToShow, setPersonsToShow] = useState([]);\n\n  useEffect(() => {\n    personService.getAll().then((pe) => {\n      setPersons(pe.data);\n      setPersonsToShow(pe.data);\n    });\n  }, []);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setNotification(null);\n    }, 5000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [notification]);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    const match = persons.filter(\n      (p) => p.name.toLowerCase() === newPerson.name.toLowerCase()\n    );\n\n    if (match.length === 0) {\n      personService\n        .create(newPerson)\n        .then((res) => {\n          setPersons([...persons, newPerson]);\n          setPersonsToShow([...persons, newPerson]);\n          setNotification({ message: `Added ${newPerson.name} to phonebook` });\n        })\n        .catch((error) =>\n          setNotification({\n            message: error?.response.data.error,\n            error: true,\n          })\n        );\n    } else {\n      if (\n        window.confirm(\n          `${newPerson.name} is already added to phonebook, replace the old number with a new one?`\n        ) == true\n      ) {\n        personService.update(match[0].id, newPerson).then((res) => {\n          const newList = persons.map((person) =>\n            person.id !== res.id ? person : res\n          );\n          setPersons(newList);\n          setPersonsToShow(newList);\n          setNotification({ message: `Updated ${newPerson.name}'s number` });\n        });\n      }\n    }\n    setNewPerson({ name: \"\", number: \"\" });\n  };\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setNewPerson({ ...newPerson, [name]: value });\n  };\n\n  const handleFilterChange = (event) => {\n    const search = event.target.value;\n    setSearchFilter(search);\n    setPersonsToShow(\n      persons.filter((person) => person.name.toLowerCase().includes(search))\n    );\n  };\n\n  const handleDelete = (id, name) => {\n    if (window.confirm(`Delete ${name}?`) == true) {\n      personService\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter((person) => person.id !== id));\n          setPersonsToShow(persons.filter((person) => person.id !== id));\n          setNotification({ message: `Removed ${name} from phonebook` });\n        })\n        .catch((error) =>\n          setNotification({\n            message: `Information of ${name} has already been removed from server`,\n            error: true,\n          })\n        );\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <div>\n        <Filter filter={searchFilter} handleFilterChange={handleFilterChange} />\n      </div>\n      <h3>Add a new</h3>\n      <PersonForm\n        addPerson={addPerson}\n        newPerson={newPerson}\n        handleChange={handleChange}\n      />\n      <div>\n        <h2>Numbers</h2>\n        <Persons personsToShow={personsToShow} personToDelete={handleDelete} />\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./index.css\";\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}