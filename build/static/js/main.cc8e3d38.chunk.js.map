{"version":3,"sources":["components/Filter.js","services/notes.js","components/Person.js","components/Persons.js","components/PersonForm.js","components/Notification.js","App.js","index.js"],"names":["Filter","filter","handleFilterChange","value","onChange","baseUrl","axios","get","newPerson","post","id","newObject","put","then","response","data","delete","Person","person","personToDelete","name","number","onClick","Persons","personsToShow","map","i","key","PersonForm","addPerson","handleChange","onSubmit","type","Notification","notification","error","className","message","App","props","useState","persons","setPersons","setNewPerson","searchFilter","setSearchFilter","setNotification","setPersonsToShow","useEffect","notes","pe","timer","setTimeout","clearTimeout","event","search","target","toLowerCase","includes","preventDefault","match","p","length","res","window","confirm","newList","catch","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cc8e3d38.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ filter, handleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      <p>filter shown with: </p>\r\n      <input value={filter} onChange={handleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import axios from 'axios'\r\nconst baseUrl = \"https://infinite-plateau-87631.herokuapp.com/api/persons\";\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newPerson => {\r\n  return axios.post(baseUrl, newPerson)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`);\r\n}\r\n\r\nexport default { \r\n  getAll: getAll, \r\n  create: create, \r\n  update: update,\r\n  delete: deletePerson,\r\n}","import React from \"react\";\r\nimport notes from \"../services/notes\";\r\n\r\nconst Person = ({ person, personToDelete }) => {\r\n  return (\r\n    <div>\r\n      {person.name} {person.number}\r\n      <button onClick={() => personToDelete(person.id, person.name)}>delete</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\nimport Person from \"./Person\";\r\n\r\nconst Persons = ({ personsToShow, personToDelete }) => {\r\n  return (\r\n    <div>\r\n      {personsToShow.map((person, i) => (\r\n        <div key={person.id}>\r\n          <Person person={person} personToDelete={personToDelete} />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React, { useState } from \"react\";\r\nconst PersonForm = ({ addPerson, newPerson, handleChange }) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          <p>name: </p>\r\n          <input name=\"name\" value={newPerson.name} onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          <p>number: </p>\r\n          <input\r\n            name=\"number\"\r\n            value={newPerson.number}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ notification} ) => {\r\n  if (notification === null) return null;\r\n\r\n  if (notification?.error) {\r\n    return <div className=\"error\">{notification?.message}</div>;\r\n  }\r\n\r\n  return <div className=\"success\">{notification?.message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useEffect, useState } from \"react\";\nimport Filter from \"./components/Filter\";\nimport Person from \"./components/Person\";\nimport Persons from \"./components/Persons\";\nimport PersonForm from \"./components/PersonForm\";\nimport axios from \"axios\";\nimport notes from \"./services/notes\";\nimport Notification from \"./components/Notification\";\n\nconst App = (props) => {\n  const [persons, setPersons] = useState([]);\n  const [person, setPerson] = useState(\"\");\n  const [newPerson, setNewPerson] = useState({ name: \"\", number: \"\" });\n  const [searchFilter, setSearchFilter] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n\n  const [personsToShow, setPersonsToShow] = useState([]);\n\n  useEffect(() => {\n    notes.getAll().then((pe) => {\n      setPersons(pe.data);\n      setPersonsToShow(pe.data);\n    });\n  }, []);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setNotification(null);\n    }, 5000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [notification]);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    const match = persons.filter((p) => p.name.toLowerCase() === newPerson.name.toLowerCase());\n\n    if (match.length === 0) {\n      notes.create(newPerson).then((res) => {\n        setPersons([...persons, newPerson]);\n        setPersonsToShow([...persons, newPerson]);\n        setNotification({ message: `Added ${newPerson.name} to phonebook` });\n      });\n    } else {\n      if (\n        window.confirm(\n          `${newPerson.name} is already added to phonebook, replace the old number with a new one?`\n        ) == true\n      ) {\n        notes.update(match[0].id, newPerson).then((res) => {\n          const newList = persons.map((person) =>\n            person.id !== res.id ? person : res\n          );\n          setPersons(newList);\n          setPersonsToShow(newList);\n          setNotification({ message: `Updated ${newPerson.name}'s number` });\n        });\n      }\n    }\n    setNewPerson({ name: \"\", number: \"\" });\n  };\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setNewPerson({ ...newPerson, [name]: value });\n  };\n\n  const handleFilterChange = (event) => {\n    const search = event.target.value;\n    setSearchFilter(search);\n    setPersonsToShow(\n      persons.filter((person) => person.name.toLowerCase().includes(search))\n    );\n  };\n\n  const handleDelete = (id, name) => {\n    if (window.confirm(`Delete ${name}?`) == true) {\n      notes\n        .delete(id)\n        .then(() => {\n          setPersons(persons.filter((person) => person.id !== id));\n          setPersonsToShow(persons.filter((person) => person.id !== id));\n          setNotification({ message: `Removed ${name} from phonebook` });\n        })\n        .catch((error) =>\n          setNotification({\n            message: `Information of ${name} has already been removed from server`,\n            error: true,\n          })\n        );\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <div>\n        <Filter filter={searchFilter} handleFilterChange={handleFilterChange} />\n      </div>\n      <h3>Add a new</h3>\n      <PersonForm\n        addPerson={addPerson}\n        newPerson={newPerson}\n        handleChange={handleChange}\n      />\n      <div>\n        <h2>Numbers</h2>\n        <Persons personsToShow={personsToShow} personToDelete={handleDelete} />\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./index.css\";\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}